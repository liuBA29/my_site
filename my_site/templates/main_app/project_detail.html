<!-- templates/main_app/project_detail.html -->

{% extends 'base.html' %}
{% load i18n %}

{% block title %}{{ project.title }} | {% trans "Project" %} {% trans "by" %} Liubov Kovaleva{% endblock %}
{% block meta_description %}{{ project.description|striptags|truncatechars:150 }}{% endblock %}
{% block meta_keywords %}{{ project.title }}, {% if project.tech_stack %}{{ project.tech_stack }}, {% endif %}Django, Python, web development, Liubov Kovaleva, LiuBA29{% endblock %}
{% block og_title %}{{ project.title }} | {% trans "Portfolio" %} LiuBA29{% endblock %}
{% block og_description %}{{ project.description|striptags|truncatechars:150 }}{% endblock %}
{% block og_image %}{{ project.image.url }}{% endblock %}
{% block og_type %}article{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "{{ project.title|escapejs }}",
  "description": "{{ project.description|striptags|escapejs|truncatechars:500 }}",
  "url": "{{ request.build_absolute_uri }}",
  "image": "{% if project.image %}{{ project.image.url }}{% endif %}",
  "author": {
    "@type": "Person",
    "name": "Liubov Kovaleva",
    "alternateName": "LiuBA29"
  },
  "applicationCategory": "WebApplication",
  "operatingSystem": "Web",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "datePublished": "{{ project.created_at|date:'c' }}",
  "dateModified": "{{ project.updated_at|date:'c' }}"
  {% if project.repo_link %},
  "codeRepository": "{{ project.repo_link }}"{% endif %}
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "{% trans "Home" %}",
      "item": "{% url 'main_app:home' %}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{% trans "My Projects" %}",
      "item": "{% url 'main_app:my_projects' %}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ project.title|escapejs }}",
      "item": "{{ request.build_absolute_uri }}"
    }
  ]
}
</script>
{% endblock %}

{% block content %}
<main class="cont">
    <!-- Breadcrumbs -->
    <nav aria-label="breadcrumb" style="margin-bottom: 20px;">
        <ol style="list-style: none; padding: 0; display: flex; flex-wrap: wrap; gap: 8px; font-size: 0.9em;">
            <li><a href="{% url 'main_app:home' %}">{% trans "Home" %}</a></li>
            <li style="color: #888;">/</li>
            <li><a href="{% url 'main_app:my_projects' %}">{% trans "My Projects" %}</a></li>
            <li style="color: #888;">/</li>
            <li style="color: #666;">{{ project.title }}</li>
        </ol>
    </nav>

    <a href="{% url 'main_app:my_projects' %}" class="back-btn">
        <span>&larr;</span> {% trans "Back to list" %}
    </a>

    <h1>{{ project.title }}</h1>
    <div class="soft-item business-detail-layout">
        {% if project.image %}
            <div class="left">
                <img src="{{ project.image.url }}" alt="{{ project.title }}">
            </div>
        {% else %}
            <div class="left no-image">
                {% trans "No Image" %}
            </div>
        {% endif %}

        <div class="right">
            <div>
                {{ project.description|safe }}
            </div>

            <div class="downloads">
                <br>
                {% if project.demo_link_ru %}
                    <a href="{% url 'main_app:track_download' 'demo_ru' project.slug %}" download class="btn btn-primary">
                        {% trans "Download DEMO(RU)" %}
                    </a>
                {% endif %}
                {% if project.demo_link_en %}
                    <a href="{% url 'main_app:track_download' 'demo_en' project.slug %}" download class="btn btn-primary">
                        {% trans "Download DEMO(EN)" %}
                    </a>
                {% endif %}
                
                <a href="{% url 'main_app:order_request' %}?service_type=Project modification" class="btn btn-primary" style="margin-left: 10px;">
                    {% trans "Order similar project" %}
                </a>
            </div>

            {% if project.repo_link %}
                <h4><strong>{% trans "GitHub" %}:</strong></h4>
                <a class="simple-link" href="{% url 'main_app:track_link' 'repo' project.slug %}" target="_blank" rel="noopener noreferrer">{{ project.repo_link }}</a>
            {% endif %}
        </div>
    </div>
</main>
{% endblock %}
