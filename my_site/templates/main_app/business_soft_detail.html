<!-- templates/main_app/business_soft_detail.html -->

{% extends 'base.html' %}
{% load i18n static main_app_extras %}
{% block title %}{{ soft.name }} | {% trans "Business Software" %} {% trans "by" %} Liubov Kovaleva{% endblock %}
{% block meta_description %}{{ soft.description|striptags|truncatechars:150 }}{% endblock %}
{% block meta_keywords %}{{ soft.name }}, business software, {% trans "Business Software" %}, Liubov Kovaleva, LiuBA29, CRM, business application{% endblock %}
{% block og_title %}{{ soft.name }} | LiuBA29 Business Software{% endblock %}
{% block og_description %}{{ soft.description|striptags|truncatechars:150 }}{% endblock %}
{% block og_image %}{% if soft.image %}{{ soft.image.url }}{% endif %}{% endblock %}
{% block og_type %}product{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "{{ soft.name|escapejs }}",
  "description": "{{ soft.description|striptags|escapejs|truncatechars:500 }}",
  "url": "{{ request.build_absolute_uri }}",
  "image": "{% if soft.image %}{{ soft.image.url }}{% endif %}",
  "author": {
    "@type": "Person",
    "name": "Liubov Kovaleva",
    "alternateName": "LiuBA29"
  },
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Windows",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  }
  {% if soft.version %},
  "softwareVersion": "{{ soft.version }}"{% endif %}
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "{% trans "Home" %}",
      "item": "{% url 'main_app:home' %}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{% trans "Business Software" %}",
      "item": "{% url 'main_app:business_soft' %}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ soft.name|escapejs }}",
      "item": "{{ request.build_absolute_uri }}"
    }
  ]
}
</script>
{% endblock %}

{% block content %}
<main class="cont">
    <!-- Breadcrumbs -->
    <nav aria-label="breadcrumb" style="margin-bottom: 20px;">
        <ol style="list-style: none; padding: 0; display: flex; flex-wrap: wrap; gap: 8px; font-size: 0.9em;">
            <li><a href="{% url 'main_app:home' %}">{% trans "Home" %}</a></li>
            <li style="color: #888;">/</li>
            <li><a href="{% url 'main_app:business_soft' %}">{% trans "Business Software" %}</a></li>
            <li style="color: #888;">/</li>
            <li style="color: #666;">{{ soft.name }}</li>
        </ol>
    </nav>

  <a href="{% url 'main_app:business_soft' %}" class="back-btn">
    <span>&larr;</span> {% trans "Back to list" %}
</a>

    <h1>{{ soft.name }}</h1>

    <div class="soft-item business-detail-layout">
        {% if soft.image %}
            <div class="left">
                <img src="{{ soft.image.url }}" alt="{{ soft.name }}">
            </div>
        {% else %}
            <div class="left no-image">
                {% trans "No Image" %}
            </div>
        {% endif %}

        <div class="right">

            <p>{% trans "Welcome to" %} <b>{{soft.name}}</b></p>
            <h4>{% trans "What is it?" %}</h4>

<div>
    {{ soft.description|replace_price:soft.standard_price }}
</div>

{% if soft.youtube_link %}
<div class="soft-video">
    <h4>{% trans "Watch tutorial" %}</h4>
    <a href="{% url 'main_app:track_link' 'youtube' soft.slug %}" target="_blank" rel="noopener noreferrer" class="btn btn-youtube">
        <i class="fab fa-youtube"></i>
        <span>{% trans "Watch on YouTube" %}</span>
    </a>
</div>
{% endif %}

{% if soft.instruction_pdf or soft.instruction_pdf_en %}
<div class="instruction-pdf">
    <h4>{% trans "Instruction Manual" %}</h4>
    {% if soft.instruction_pdf %}
        <a href="{% url 'main_app:track_download' 'pdf_instruction' soft.slug %}" target="_blank" download>
            <i class="fas fa-download"></i>
            <span>{% trans "Download PDF Instruction" %} (RU)</span>
        </a>
    {% endif %}
    {% if soft.instruction_pdf_en %}
        <a href="{% url 'main_app:track_download' 'pdf_instruction_en' soft.slug %}" target="_blank" download>
            <i class="fas fa-download"></i>
            <span>{% trans "Download PDF Instruction" %} (EN)</span>
        </a>
    {% endif %}
</div>
{% endif %}

{% if soft.show_pricing %}
<div class="pricing-section">
    <h4>{% trans "Available Versions" %}</h4>
    <div class="pricing-cards">
        <!-- Демо версия -->
        <div class="pricing-card">
            <div class="pricing-header">
                <h3>{% trans "Demo Version" %}</h3>
                <div class="pricing-price">{% trans "Free" %}</div>
            </div>
            <div class="pricing-body">
                <p>{% trans "Try the demo version for free" %}</p>
                {% if soft.demo_link %}
                    <a href="{% url 'main_app:track_download' 'demo_ru' soft.slug %}" target="_blank" class="btn btn-pricing btn-demo">
                        {% trans "Try Demo" %}
                    </a>
                {% else %}
                    <button class="btn btn-pricing btn-demo" disabled>
                        {% trans "Coming Soon" %}
                    </button>
                {% endif %}
            </div>
        </div>

        <!-- Стандартная версия -->
        <div class="pricing-card pricing-featured">
            <div class="pricing-badge">{% trans "Popular" %}</div>
            <div class="pricing-header">
                <h3>{% trans "Standard Version" %}</h3>
                <div class="pricing-price">
                    {% if soft.standard_price %}
                        {{ soft.standard_price }} BYN
                    {% else %}
                        {% trans "Price on request" %}
                    {% endif %}
                </div>
            </div>
            <div class="pricing-body">
                <p>{% trans "Full-featured standard version" %}</p>
                <a href="{% url 'main_app:order_request' %}?service_type=Software development&product_name={{ soft.name|urlencode }}&product_version=Standard{% if soft.standard_price %}&product_price={{ soft.standard_price }} BYN{% endif %}" class="btn btn-pricing btn-standard">
                    {% trans "Order Now" %}
                </a>
            </div>
        </div>

        <!-- Кастомная версия -->
        <div class="pricing-card">
            <div class="pricing-header">
                <h3>{% trans "Custom Version" %}</h3>
                <div class="pricing-price">{% trans "Custom" %}</div>
            </div>
            <div class="pricing-body">
                <p>{% trans "Tailored solution for your business" %}</p>
                <a href="{% url 'main_app:order_request' %}?service_type=Software development&product_name={{ soft.name|urlencode }}&product_version=Custom&product_price=Custom" class="btn btn-pricing btn-custom">
                    {% trans "Request a Quote" %}
                </a>
            </div>
        </div>
    </div>
</div>
{% endif %}

             {% if soft.version %}
                <p><strong>{% trans "Version" %}:</strong> {{ soft.version }}</p>
            {% endif %}

            <!--   {% if soft.author %}
                <p><strong>{% trans "Author" %}:</strong> {{ soft.author }}</p>
            {% endif %}-->

{% if soft.download_link or soft.english_link %}
            <div class="downloads">
                <br>
                {% if soft.download_link %}
                    <a href="{% url 'main_app:track_download' 'installer_ru' soft.slug %}" download class="btn btn-primary">
                        {% trans "Download installer(RU)" %}
                    </a>
                {% endif %}

                {% if soft.english_link %}
                    <a href="{% url 'main_app:track_download' 'installer_en' soft.slug %}" download class="btn btn-primary">
                        {% trans "Download installer(EN)" %}
                    </a>
                {% endif %}
            </div>
{% endif %}
        </div>
    </div>
</main>
{% endblock %}

